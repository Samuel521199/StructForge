# 测试指南

## 前置检查

### 1. 安装依赖

确保已安装所有必要的依赖：

```bash
cd frontend
npm install
```

**必需的依赖包：**
- `vue` (^3.x)
- `vue-router` (^4.x)
- `pinia` (^2.x)
- `element-plus` (^2.x)
- `@element-plus/icons-vue` (^2.x)
- `@vue-flow/core` (必需，用于工作流编辑器)

如果缺少 `@vue-flow/core`，请安装：
```bash
npm install @vue-flow/core
```

### 2. 检查配置文件

确保以下文件存在且配置正确：
- `vite.config.ts` - Vite 配置
- `tsconfig.json` - TypeScript 配置
- `src/main.ts` - 应用入口
- `src/router/index.ts` - 路由配置

## 启动开发服务器

```bash
cd frontend
npm run dev
```

访问：`http://localhost:5173` (或 Vite 显示的端口)

## 功能测试清单

### ✅ 1. 用户认证功能

#### 1.1 登录页面测试
- [ ] 访问 `/auth/login` 显示登录页面
- [ ] 输入用户名和密码
- [ ] 点击"登录"按钮（目前会调用 API，如果后端未启动会失败）
- [ ] 点击"立即注册"跳转到注册页面
- [ ] 表单验证：空用户名/密码显示错误提示

#### 1.2 注册页面测试
- [ ] 访问 `/auth/register` 显示注册页面
- [ ] 输入用户名、邮箱、密码、确认密码
- [ ] 表单验证：
  - [ ] 用户名长度 3-20 字符
  - [ ] 邮箱格式验证
  - [ ] 密码长度 6-20 字符
  - [ ] 确认密码必须与密码一致
- [ ] 未勾选用户协议时，"注册"按钮禁用
- [ ] 点击"立即登录"跳转到登录页面

#### 1.3 Header 组件测试
- [ ] 未登录状态：右上角显示"登录"按钮
- [ ] 点击"登录"按钮跳转到登录页面
- [ ] 登录后：右上角显示用户头像和用户名
- [ ] 点击用户信息显示下拉菜单
- [ ] 下拉菜单包含：个人中心、设置、退出登录
- [ ] 点击"个人中心"跳转到 `/user/profile`
- [ ] 点击"退出登录"清除登录状态并跳转到登录页

### ✅ 2. 个人中心功能

#### 2.1 个人信息展示
- [ ] 显示用户头像（如果有）
- [ ] 显示用户名
- [ ] 显示邮箱
- [ ] 显示注册时间

#### 2.2 头像上传
- [ ] 点击头像上的相机图标
- [ ] 选择图片文件
- [ ] 验证：只接受 JPG/PNG 格式
- [ ] 验证：文件大小不超过 2MB
- [ ] 上传成功后更新头像显示

#### 2.3 信息编辑
- [ ] 修改用户名并保存
- [ ] 修改邮箱并保存
- [ ] 修改头像URL并保存
- [ ] 点击"重置"恢复原始值

### ✅ 3. 工作流列表功能

#### 3.1 列表展示
- [ ] 访问 `/workflow/list` 显示工作流列表
- [ ] 显示工作流名称、描述、状态、创建时间、更新时间
- [ ] 状态标签正确显示（运行中、已停止等）

#### 3.2 搜索和筛选
- [ ] 在搜索框输入关键词进行搜索
- [ ] 点击"筛选"按钮展开筛选面板
- [ ] 选择状态筛选条件
- [ ] 点击"应用"应用筛选条件
- [ ] 点击"重置"清空筛选条件

#### 3.3 操作功能
- [ ] 点击"创建工作流"跳转到编辑器
- [ ] 点击"编辑"按钮跳转到编辑器
- [ ] 点击"删除"按钮（需要确认对话框）
- [ ] 点击工作流行跳转到详情页

### ✅ 4. 工作流编辑器功能

#### 4.1 节点面板（NodePalette）
- [ ] 左侧显示节点面板
- [ ] 节点按分类显示（触发、AI、数据处理、控制流、集成、工具）
- [ ] 点击分类标题折叠/展开分类
- [ ] 在搜索框输入关键词过滤节点
- [ ] 节点可以拖拽（鼠标按下时显示拖拽状态）

#### 4.2 画布区域（WorkflowEditor）
- [ ] 画布正常显示
- [ ] 显示背景网格
- [ ] 显示小地图（右下角）
- [ ] 显示控制面板（缩放、适应视图等）
- [ ] 支持画布缩放（鼠标滚轮）
- [ ] 支持画布平移（拖拽空白区域）

#### 4.3 节点拖放
- [ ] 从节点面板拖拽节点到画布
- [ ] 节点在画布上正确位置显示
- [ ] 节点显示图标和标签
- [ ] 触发节点没有输入端口
- [ ] 其他节点有输入和输出端口

#### 4.4 节点连接
- [ ] 点击节点的输出端口
- [ ] 拖拽到另一个节点的输入端口
- [ ] 创建连接线
- [ ] 连接线正确显示

#### 4.5 节点选择
- [ ] 点击节点选中节点
- [ ] 选中节点后右侧属性面板显示节点信息
- [ ] 属性面板显示：节点ID、节点类型、节点名称
- [ ] 可以编辑节点名称
- [ ] 对于 HTTP 节点，显示 URL 和方法选择

#### 4.6 工具栏功能
- [ ] 点击"返回"按钮跳转到工作流列表
- [ ] 显示工作流名称（或"未命名工作流"）
- [ ] 点击"保存"按钮（目前显示成功提示）
- [ ] 点击"运行"按钮（目前显示成功提示）

### ✅ 5. 路由和导航

#### 5.1 路由守卫
- [ ] 未登录访问需要认证的页面，自动跳转到登录页
- [ ] 登录后跳转回之前访问的页面
- [ ] 已登录访问登录页，应该跳转到首页

#### 5.2 404 页面
- [ ] 访问不存在的路由显示 404 页面

## 已知问题和注意事项

### 1. 后端 API 未连接
目前前端代码中的 API 调用会失败，因为后端可能未启动或未实现。这是正常的，可以：
- 使用浏览器开发者工具查看网络请求
- 检查控制台错误信息
- 后续连接后端 API 后即可正常工作

### 2. Vue Flow 依赖
如果工作流编辑器无法显示，请确保已安装 `@vue-flow/core`：
```bash
npm install @vue-flow/core
```

### 3. 图标组件
某些 Element Plus 图标可能需要单独导入，如果图标不显示，检查：
- 是否正确导入图标组件
- 图标名称是否正确

### 4. 样式问题
如果样式显示异常，检查：
- Element Plus 样式是否正确导入
- SCSS 文件是否存在
- CSS 变量是否正确设置

## 测试数据

### 测试用户（需要后端支持）
- 用户名：`testuser`
- 密码：`test123456`
- 邮箱：`test@example.com`

### 模拟工作流数据
工作流列表页面目前使用模拟数据，包含一个示例工作流。

## 调试技巧

### 1. 浏览器开发者工具
- 打开 Chrome DevTools (F12)
- 查看 Console 标签页的错误信息
- 查看 Network 标签页的 API 请求
- 查看 Vue DevTools（如果安装了）

### 2. Vue DevTools
安装 Vue DevTools 浏览器扩展，可以：
- 查看组件状态
- 查看 Pinia store 状态
- 查看路由状态
- 调试组件

### 3. 控制台日志
代码中包含 `console.log` 和 `console.error`，可以在控制台查看调试信息。

## 下一步

测试完成后，可以：
1. 连接后端 API
2. 完善错误处理
3. 添加更多节点类型
4. 实现工作流执行功能
5. 添加单元测试和 E2E 测试

